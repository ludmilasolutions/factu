<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema POS Comercial</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body data-theme="light">
    <!-- Modales generales -->
    <div id="genericModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Modal</h3>
                <span class="modal-close" onclick="handleModalCancel()">&times;</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Contenido din√°mico -->
            </div>
            <div class="modal-footer">
                <button id="modalConfirm" class="btn btn-primary">Confirmar</button>
                <button id="modalCancel" class="btn btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal de pago -->
    <div id="paymentModal" class="modal">
        <div class="modal-content modal-payment">
            <div class="modal-header">
                <h3>M√©todo de Pago</h3>
                <span class="modal-close" onclick="handleModalCancel()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="payment-total">
                    <h4>Total a pagar: <span id="paymentTotalAmount">$0.00</span></h4>
                </div>
                <div class="payment-methods">
                    <button class="payment-btn" data-method="efectivo">
                        <i class="fas fa-money-bill-wave"></i> Efectivo
                    </button>
                    <button class="payment-btn" data-method="tarjeta">
                        <i class="fas fa-credit-card"></i> Tarjeta
                    </button>
                    <button class="payment-btn" data-method="transferencia">
                        <i class="fas fa-university"></i> Transferencia
                    </button>
                    <button class="payment-btn" data-method="qr">
                        <i class="fas fa-qrcode"></i> QR
                    </button>
                    <button class="payment-btn" data-method="cuenta">
                        <i class="fas fa-file-invoice-dollar"></i> Cuenta
                    </button>
                    <button class="payment-btn" data-method="combinado">
                        <i class="fas fa-random"></i> Combinado
                    </button>
                </div>
                <div id="paymentDetails" class="payment-details">
                    <!-- Detalles din√°micos del pago -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirmPayment" class="btn btn-success">Confirmar Pago</button>
                <button id="cancelPayment" class="btn btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Contenedor del scanner -->
    <div id="scannerContainer" class="scanner-container">
        <div class="scanner-header">
            <h3>Escanear C√≥digo de Barras</h3>
            <button id="stopScanner" class="btn btn-danger">‚úï Cerrar</button>
        </div>
        <video id="scannerVideo" autoplay playsinline></video>
        <div class="scanner-overlay"></div>
    </div>

    <!-- Teclado num√©rico virtual -->
    <div id="tecladoNumericoContainer">
        <div id="tecladoNumerico" style="display: none;">
            <div class="teclado-grid">
                <button class="btn-num" data-num="1">1</button>
                <button class="btn-num" data-num="2">2</button>
                <button class="btn-num" data-num="3">3</button>
                <button class="btn-num" data-num="4">4</button>
                <button class="btn-num" data-num="5">5</button>
                <button class="btn-num" data-num="6">6</button>
                <button class="btn-num" data-num="7">7</button>
                <button class="btn-num" data-num="8">8</button>
                <button class="btn-num" data-num="9">9</button>
                <button class="btn-num" data-num=".">.</button>
                <button class="btn-num" data-num="0">0</button>
                <button class="btn-num" id="btnEnter">Enter</button>
            </div>
            <div class="teclado-close">
                <button onclick="toggleTecladoNumerico()" class="btn btn-danger">‚úï Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Pantalla de login -->
    <div id="loginScreen" class="screen login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1><i class="fas fa-cash-register"></i> POS Comercial</h1>
                <p class="version">v4.0.0</p>
            </div>
            
            <div class="login-form">
                <h2>Iniciar Sesi√≥n</h2>
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" class="form-control" placeholder="usuario@empresa.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Contrase√±a</label>
                    <input type="password" id="loginPassword" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div id="loginStatus"></div>
                <button id="loginBtn" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i> Ingresar
                </button>
            </div>
            
            <div class="login-footer">
                <p>Sistema de Punto de Venta Comercial</p>
                <p class="hint">Presiona Enter para ingresar</p>
            </div>
        </div>
    </div>

    <!-- Pantalla principal de la aplicaci√≥n -->
    <div id="appScreen" class="screen app-screen" style="display: none;">
        <!-- Configuraci√≥n inicial (local, caja, turno) -->
        <div id="initialConfig" class="page active">
            <div class="config-container">
                <h2><i class="fas fa-store"></i> Configuraci√≥n de Sesi√≥n</h2>
                <p class="subtitle">Selecciona el local, caja y turno para comenzar</p>
                
                <div class="config-form">
                    <div class="form-group">
                        <label for="selectLocal">Local *</label>
                        <select id="selectLocal" class="form-control" required>
                            <option value="">Seleccionar local...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="selectCaja">Caja *</label>
                        <select id="selectCaja" class="form-control" required>
                            <option value="">Seleccionar caja...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="selectTurno">Turno *</label>
                        <select id="selectTurno" class="form-control" required>
                            <option value="">Seleccionar turno...</option>
                            <option value="ma√±ana">Ma√±ana</option>
                            <option value="tarde">Tarde</option>
                            <option value="noche">Noche</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="saldoInicial">Saldo Inicial en Caja</label>
                        <input type="number" id="saldoInicial" class="form-control" value="0" step="0.01" min="0">
                    </div>
                    
                    <button id="startSession" class="btn btn-success btn-block">
                        <i class="fas fa-play-circle"></i> Iniciar Sesi√≥n de Trabajo
                    </button>
                </div>
            </div>
        </div>

        <!-- Aplicaci√≥n principal -->
        <div id="mainApp" class="app-container" style="display: none;">
            <!-- Header superior -->
            <header class="app-header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="app-title">
                        <h2><i class="fas fa-cash-register"></i> <span id="currentPage">POS</span></h2>
                    </div>
                </div>
                
                <div class="header-center">
                    <div class="session-info">
                        <span id="userInfo" class="info-badge"><i class="fas fa-user"></i> Usuario</span>
                        <span id="localInfo" class="info-badge"><i class="fas fa-store"></i> Local</span>
                        <span id="cajaInfo" class="info-badge"><i class="fas fa-calculator"></i> Caja</span>
                        <span id="turnoInfo" class="info-badge"><i class="fas fa-clock"></i> Turno</span>
                        <span id="syncStatus" class="btn-status online" title="Estado de conexi√≥n"><i class="fas fa-wifi"></i> Online</span>
                    </div>
                </div>
                
                <div class="header-right">
                    <button id="activarTecladoNumerico" class="btn btn-secondary" title="Teclado num√©rico">
                        <i class="fas fa-keyboard"></i>
                    </button>
                    <button id="syncManual" class="btn btn-outline" title="Sincronizar datos">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button id="cerrarCaja" class="btn btn-warning" title="Cerrar caja">
                        <i class="fas fa-power-off"></i> Cerrar
                    </button>
                    <button id="logoutBtn" class="btn btn-danger" title="Cerrar sesi√≥n">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </header>

            <!-- Contenedor principal -->
            <div class="main-content">
                <!-- Navegaci√≥n lateral -->
                <nav class="sidebar" id="sidebar">
                    <div class="nav-section">
                        <h3 class="nav-title">VENTAS</h3>
                        <button class="nav-btn active" data-page="pos">
                            <i class="fas fa-shopping-cart"></i> POS
                        </button>
                        <button class="nav-btn" data-page="ventas">
                            <i class="fas fa-receipt"></i> Ventas
                        </button>
                        <button class="nav-btn" data-page="presupuestos">
                            <i class="fas fa-file-contract"></i> Presupuestos
                        </button>
                    </div>
                    
                    <div class="nav-section">
                        <h3 class="nav-title">INVENTARIO</h3>
                        <button class="nav-btn" data-page="productos">
                            <i class="fas fa-boxes"></i> Productos
                        </button>
                        <button class="nav-btn" data-page="proveedores">
                            <i class="fas fa-truck"></i> Proveedores
                        </button>
                    </div>
                    
                    <div class="nav-section">
                        <h3 class="nav-title">CLIENTES</h3>
                        <button class="nav-btn" data-page="clientes">
                            <i class="fas fa-users"></i> Clientes
                        </button>
                    </div>
                    
                    <div class="nav-section">
                        <h3 class="nav-title">CAJA</h3>
                        <button class="nav-btn" data-page="caja">
                            <i class="fas fa-cash-register"></i> Caja
                        </button>
                        <button class="nav-btn" data-page="reportes">
                            <i class="fas fa-chart-bar"></i> Reportes
                        </button>
                    </div>
                    
                    <div class="nav-footer">
                        <div class="theme-toggle">
                            <span>Modo Oscuro</span>
                            <label class="switch">
                                <input type="checkbox" id="themeToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="system-status">
                            <p>üü¢ Sistema Operativo</p>
                            <p class="small">POS Comercial v4.0</p>
                        </div>
                    </div>
                </nav>

                <!-- Contenido de p√°ginas -->
                <div class="content-area">
                    <!-- P√°gina POS (Principal) -->
                    <div id="pagePos" class="page active">
                        <div class="pos-container">
                            <!-- Panel izquierdo: B√∫squeda y productos -->
                            <div class="pos-left">
                                <div class="search-section">
                                    <div class="search-header">
                                        <h3><i class="fas fa-search"></i> B√∫squeda de Productos</h3>
                                        <div class="search-actions">
                                            <button id="scanBarcode" class="btn btn-primary">
                                                <i class="fas fa-barcode"></i> Escanear
                                            </button>
                                            <button id="keyboardMode" class="btn btn-secondary">
                                                <i class="fas fa-keyboard"></i> Teclado
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="search-box">
                                        <input type="text" 
                                               id="productSearch" 
                                               class="search-input" 
                                               placeholder="Buscar por nombre, c√≥digo, marca..."
                                               autocomplete="off"
                                               list="productosDatalist">
                                        <datalist id="productosDatalist"></datalist>
                                        <button id="buscarProductoBtn" class="btn btn-primary search-btn">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="quick-filters">
                                        <div class="form-group-inline">
                                            <label for="selectMarcaProducto">Marca:</label>
                                            <select id="selectMarcaProducto" class="form-control-sm">
                                                <option value="">Todas</option>
                                            </select>
                                        </div>
                                        <button id="filterStockBajo" class="btn btn-outline btn-sm">
                                            <i class="fas fa-exclamation-triangle"></i> Stock Bajo
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="products-section">
                                    <div class="section-header">
                                        <h3><i class="fas fa-box-open"></i> Productos Disponibles</h3>
                                        <div class="section-actions">
                                            <span class="badge" id="productCount">0 productos</span>
                                        </div>
                                    </div>
                                    
                                    <div id="productsGrid" class="products-grid">
                                        <!-- Productos cargados din√°micamente -->
                                        <div class="no-data">Cargando productos...</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Panel derecho: Carrito y cliente -->
                            <div class="pos-right">
                                <div class="cart-section">
                                    <div class="section-header">
                                        <h3><i class="fas fa-shopping-cart"></i> Carrito de Venta</h3>
                                        <div class="section-actions">
                                            <button id="cancelarVenta" class="btn btn-danger btn-sm">
                                                <i class="fas fa-times"></i> Cancelar
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="client-selector">
                                        <label for="selectCliente">Cliente:</label>
                                        <select id="selectCliente" class="form-control">
                                            <option value="">Cliente Contado</option>
                                            <option value="nuevo">‚ûï Nuevo Cliente</option>
                                        </select>
                                    </div>
                                    
                                    <div id="cartItems" class="cart-items">
                                        <!-- Items del carrito cargados din√°micamente -->
                                        <div class="cart-empty">
                                            <i class="fas fa-shopping-cart"></i>
                                            <p>Busca y agrega productos al carrito</p>
                                        </div>
                                    </div>
                                    
                                    <div class="cart-summary">
                                        <div class="summary-row">
                                            <span>Subtotal:</span>
                                            <span id="cartSubtotal">$0.00</span>
                                        </div>
                                        <div class="summary-row">
                                            <label for="cartDiscount">Descuento:</label>
                                            <input type="number" 
                                                   id="cartDiscount" 
                                                   class="form-control-sm"
                                                   value="0" 
                                                   step="0.01" 
                                                   min="0">
                                        </div>
                                        <div class="summary-row total">
                                            <span>TOTAL:</span>
                                            <span id="cartTotal">$0.00</span>
                                        </div>
                                    </div>
                                    
                                    <div class="cart-actions">
                                        <button id="crearPresupuesto" class="btn btn-secondary">
                                            <i class="fas fa-file-contract"></i> Presupuesto
                                        </button>
                                        <button id="finalizarVenta" class="btn btn-success">
                                            <i class="fas fa-check-circle"></i> Finalizar Venta
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="quick-actions">
                                    <button id="aplicarPromocion" class="btn btn-outline btn-block">
                                        <i class="fas fa-tag"></i> Aplicar Promoci√≥n
                                    </button>
                                    <button id="retirarEfectivo" class="btn btn-outline btn-block">
                                        <i class="fas fa-hand-holding-usd"></i> Retirar Efectivo
                                    </button>
                                    <div class="stats-card">
                                        <h4><i class="fas fa-chart-line"></i> Estad√≠sticas</h4>
                                        <p>Ventas hoy: <strong id="ventasHoyCount">0</strong></p>
                                        <p>Presupuestos: <strong id="presupuestosCount">0</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P√°gina Productos -->
                    <div id="pageProductos" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-boxes"></i> Gesti√≥n de Productos</h2>
                            <div class="page-actions">
                                <button id="nuevoProducto" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Nuevo Producto
                                </button>
                                <button id="importarExcel" class="btn btn-outline">
                                    <i class="fas fa-file-import"></i> Importar
                                </button>
                                <button id="exportarExcel" class="btn btn-outline">
                                    <i class="fas fa-file-export"></i> Exportar
                                </button>
                                <div class="search-box-sm">
                                    <input type="text" 
                                           id="filterProductos" 
                                           class="form-control"
                                           placeholder="Filtrar productos...">
                                </div>
                            </div>
                        </div>
                        
                        <div id="productosList" class="grid-container">
                            <!-- Productos cargados din√°micamente -->
                            <div class="loading">Cargando productos...</div>
                        </div>
                    </div>

                    <!-- P√°gina Clientes -->
                    <div id="pageClientes" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-users"></i> Gesti√≥n de Clientes</h2>
                            <div class="page-actions">
                                <button id="nuevoCliente" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Nuevo Cliente
                                </button>
                                <button id="nuevoClientePage" class="btn btn-outline">
                                    <i class="fas fa-user-plus"></i> Nuevo
                                </button>
                            </div>
                        </div>
                        
                        <div id="clientesList" class="table-container">
                            <!-- Clientes cargados din√°micamente -->
                            <div class="loading">Cargando clientes...</div>
                        </div>
                    </div>

                    <!-- P√°gina Proveedores -->
                    <div id="pageProveedores" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-truck"></i> Gesti√≥n de Proveedores</h2>
                            <div class="page-actions">
                                <button id="nuevoProveedor" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Nuevo Proveedor
                                </button>
                                <button id="webProveedorBtn" class="btn btn-outline">
                                    <i class="fas fa-globe"></i> Web Proveedor
                                </button>
                                <button id="generarPedidos" class="btn btn-success">
                                    <i class="fas fa-shopping-cart"></i> Generar Pedidos
                                </button>
                            </div>
                        </div>
                        
                        <div id="proveedoresList" class="grid-container">
                            <!-- Proveedores cargados din√°micamente -->
                            <div class="loading">Cargando proveedores...</div>
                        </div>
                    </div>

                    <!-- P√°gina Presupuestos -->
                    <div id="pagePresupuestos" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-file-contract"></i> Gesti√≥n de Presupuestos</h2>
                            <div class="page-actions">
                                <button class="btn btn-outline" onclick="loadPresupuestos()">
                                    <i class="fas fa-sync"></i> Actualizar
                                </button>
                            </div>
                        </div>
                        
                        <div id="presupuestosList" class="table-container">
                            <!-- Presupuestos cargados din√°micamente -->
                            <div class="loading">Cargando presupuestos...</div>
                        </div>
                    </div>

                    <!-- P√°gina Reportes -->
                    <div id="pageReportes" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-chart-bar"></i> Reportes y Estad√≠sticas</h2>
                            <div class="page-actions">
                                <button class="btn btn-primary" onclick="generarReporteDetallado()">
                                    <i class="fas fa-chart-pie"></i> Reporte Detallado
                                </button>
                            </div>
                        </div>
                        
                        <div id="reportesContent" class="reports-container">
                            <!-- Reportes cargados din√°micamente -->
                            <div class="loading">Cargando reportes...</div>
                        </div>
                    </div>

                    <!-- P√°gina Caja -->
                    <div id="pageCaja" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-cash-register"></i> Cierre de Caja</h2>
                            <div class="page-actions">
                                <button id="verCajasBtn" class="btn btn-outline">
                                    <i class="fas fa-history"></i> Ver Historial
                                </button>
                            </div>
                        </div>
                        
                        <div class="caja-container">
                            <div class="caja-resumen">
                                <h3><i class="fas fa-chart-line"></i> Resumen de Caja</h3>
                                <div class="resumen-grid">
                                    <div class="resumen-card">
                                        <h4>Saldo Inicial</h4>
                                        <p class="amount" id="saldoInicialResumen">$0.00</p>
                                    </div>
                                    <div class="resumen-card">
                                        <h4>Ventas Efectivo</h4>
                                        <p class="amount" id="ventasEfectivo">$0.00</p>
                                    </div>
                                    <div class="resumen-card">
                                        <h4>Ventas Tarjeta</h4>
                                        <p class="amount" id="ventasTarjeta">$0.00</p>
                                    </div>
                                    <div class="resumen-card">
                                        <h4>Ventas Transferencia</h4>
                                        <p class="amount" id="ventasTransferencia">$0.00</p>
                                    </div>
                                    <div class="resumen-card">
                                        <h4>Ventas QR</h4>
                                        <p class="amount" id="ventasQr">$0.00</p>
                                    </div>
                                    <div class="resumen-card">
                                        <h4>Ventas Cuenta</h4>
                                        <p class="amount" id="ventasCuenta">$0.00</p>
                                    </div>
                                    <div class="resumen-card">
                                        <h4>Retiros Efectivo</h4>
                                        <p class="amount" id="retirosEfectivo">$0.00</p>
                                    </div>
                                    <div class="resumen-card total">
                                        <h4>Total Ventas</h4>
                                        <p class="amount" id="totalVentas">$0.00</p>
                                    </div>
                                    <div class="resumen-card">
                                        <h4>Saldo Final</h4>
                                        <p class="amount" id="saldoFinal">$0.00</p>
                                    </div>
                                    <div class="resumen-card diferencia">
                                        <h4>Diferencia</h4>
                                        <p class="amount" id="diferenciaResumen">$0.00</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="caja-acciones">
                                <div class="action-card">
                                    <h4><i class="fas fa-calculator"></i> Calculadora</h4>
                                    <div class="calculator">
                                        <input type="text" class="calc-display" readonly value="0">
                                        <div class="calc-buttons">
                                            <button class="calc-btn">7</button>
                                            <button class="calc-btn">8</button>
                                            <button class="calc-btn">9</button>
                                            <button class="calc-btn">/</button>
                                            <button class="calc-btn">4</button>
                                            <button class="calc-btn">5</button>
                                            <button class="calc-btn">6</button>
                                            <button class="calc-btn">*</button>
                                            <button class="calc-btn">1</button>
                                            <button class="calc-btn">2</button>
                                            <button class="calc-btn">3</button>
                                            <button class="calc-btn">-</button>
                                            <button class="calc-btn">0</button>
                                            <button class="calc-btn">.</button>
                                            <button class="calc-btn">=</button>
                                            <button class="calc-btn">+</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="action-card">
                                    <h4><i class="fas fa-tools"></i> Acciones R√°pidas</h4>
                                    <button class="btn btn-block btn-outline" onclick="toggleTecladoNumerico()">
                                        <i class="fas fa-keyboard"></i> Teclado Virtual
                                    </button>
                                    <button class="btn btn-block btn-outline" onclick="retirarEfectivo()">
                                        <i class="fas fa-money-bill-wave"></i> Retiro de Efectivo
                                    </button>
                                    <button class="btn btn-block btn-outline" onclick="cerrarCaja()">
                                        <i class="fas fa-power-off"></i> Cerrar Caja
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P√°gina Ventas -->
                    <div id="pageVentas" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-receipt"></i> Historial de Ventas</h2>
                            <div class="page-actions">
                                <button class="btn btn-outline" onclick="loadVentas()">
                                    <i class="fas fa-sync"></i> Actualizar
                                </button>
                            </div>
                        </div>
                        
                        <div id="ventasList" class="table-container">
                            <!-- Ventas cargadas din√°micamente -->
                            <div class="loading">Cargando ventas...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenedor de alertas -->
    <div id="alertasContainer" class="alertas-container"></div>

    <script src="app.js"></script>
    <script>
        // Toggle tema claro/oscuro
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('themeToggle');
            const savedTheme = localStorage.getItem('pos-theme') || 'light';
            
            document.body.setAttribute('data-theme', savedTheme);
            themeToggle.checked = savedTheme === 'dark';
            
            themeToggle.addEventListener('change', function() {
                const theme = this.checked ? 'dark' : 'light';
                document.body.setAttribute('data-theme', theme);
                localStorage.setItem('pos-theme', theme);
            });
            
            // Toggle sidebar en m√≥viles
            const menuToggle = document.getElementById('menuToggle');
            const sidebar = document.getElementById('sidebar');
            
            menuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('mobile-open');
            });
            
            // Cerrar sidebar al hacer clic fuera en m√≥viles
            document.addEventListener('click', function(event) {
                if (window.innerWidth <= 768 && 
                    !sidebar.contains(event.target) && 
                    !menuToggle.contains(event.target) &&
                    sidebar.classList.contains('mobile-open')) {
                    sidebar.classList.remove('mobile-open');
                }
            });
        });
    </script>
</body>
</html>
