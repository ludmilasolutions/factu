<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema POS - Facturaci√≥n Web</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>üõí Sistema POS</h1>
                <p class="subtitle">Facturaci√≥n Web - MultiLocal - Offline First</p>
            </div>
            
            <div class="login-form">
                <div class="form-group">
                    <label for="loginEmail">Email:</label>
                    <input type="email" id="loginEmail" placeholder="usuario@empresa.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Contrase√±a:</label>
                    <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button id="loginBtn" class="btn btn-primary">Iniciar Sesi√≥n</button>
                <button id="loginOffline" class="btn btn-secondary">Modo Offline</button>
            </div>
            
            <div class="login-status" id="loginStatus"></div>
            
            <div class="setup-link">
                <p>¬øPrimera vez? <a href="setup.html">Configurar sistema</a></p>
            </div>
        </div>
    </div>

    <!-- Aplicaci√≥n Principal (oculta inicialmente) -->
    <div id="appScreen" class="app-screen" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <h1>üõí POS <span id="currentPage">Ventas</span></h1>
                <div class="session-info">
                    <span id="userInfo">Usuario: -</span>
                    <span id="localInfo">Local: -</span>
                    <span id="cajaInfo">Caja: -</span>
                    <span id="turnoInfo">Turno: -</span>
                </div>
            </div>
            <div class="header-right">
                <button id="syncStatus" class="btn-status online" title="Estado de conexi√≥n">üü¢ Online</button>
                <button id="notifications" class="btn-icon">üîî</button>
                <button id="logoutBtn" class="btn btn-secondary">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <!-- Panel de Configuraci√≥n Inicial -->
        <div id="initialConfig" class="initial-config">
            <div class="config-card">
                <h2>‚öôÔ∏è Configuraci√≥n de Sesi√≥n</h2>
                <div class="form-group">
                    <label for="selectLocal">Local:</label>
                    <select id="selectLocal">
                        <option value="">Seleccionar local...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="selectCaja">Caja:</label>
                    <select id="selectCaja">
                        <option value="">Seleccionar caja...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="selectTurno">Turno:</label>
                    <select id="selectTurno">
                        <option value="ma√±ana">Ma√±ana</option>
                        <option value="tarde">Tarde</option>
                        <option value="noche">Noche</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="saldoInicial">Saldo Inicial en Caja:</label>
                    <input type="number" id="saldoInicial" placeholder="0.00" min="0" step="0.01">
                </div>
                <button id="startSession" class="btn btn-primary">Iniciar Sesi√≥n de Trabajo</button>
            </div>
        </div>

        <!-- Aplicaci√≥n Principal -->
        <div id="mainApp" class="main-app" style="display: none;">
            <!-- Barra de Navegaci√≥n -->
            <nav class="main-nav">
                <button class="nav-btn active" data-page="pos">üõí POS</button>
                <button class="nav-btn" data-page="productos">üì¶ Productos</button>
                <button class="nav-btn" data-page="clientes">üë• Clientes</button>
                <button class="nav-btn" data-page="proveedores">üè¢ Proveedores</button>
                <button class="nav-btn" data-page="presupuestos">üìÑ Presupuestos</button>
                <button class="nav-btn" data-page="reportes">üìä Reportes</button>
                <button class="nav-btn" data-page="caja">üí∞ Caja</button>
            </nav>

            <!-- Contenido Din√°mico -->
            <div class="main-content">
                <!-- P√°gina POS -->
                <div id="pagePos" class="page active">
                    <div class="pos-container">
                        <!-- Buscador de Productos -->
                        <div class="pos-search">
                            <input type="text" id="productSearch" placeholder="üîç Buscar producto por c√≥digo o nombre...">
                            <button id="scanBarcode" class="btn btn-primary">üì∑ Escanear</button>
                            <button id="keyboardMode" class="btn btn-secondary">‚å®Ô∏è Modo Teclado</button>
                        </div>

                        <!-- Video para escaner -->
                        <div id="scannerContainer" class="scanner-container" style="display: none;">
                            <video id="scannerVideo" width="100%" height="200"></video>
                            <button id="stopScanner" class="btn btn-secondary">Detener Esc√°ner</button>
                        </div>

                        <!-- Carrito de Compras -->
                        <div class="pos-cart">
                            <h3>üõí Carrito de Venta</h3>
                            <div class="cart-header">
                                <span>Producto</span>
                                <span>Cant.</span>
                                <span>Precio</span>
                                <span>Subtotal</span>
                                <span>Acciones</span>
                            </div>
                            <div id="cartItems" class="cart-items">
                                <!-- Items del carrito se agregar√°n aqu√≠ din√°micamente -->
                            </div>
                            <div class="cart-summary">
                                <div class="summary-row">
                                    <span>Subtotal:</span>
                                    <span id="cartSubtotal">$0.00</span>
                                </div>
                                <div class="summary-row">
                                    <span>Descuento:</span>
                                    <input type="number" id="cartDiscount" placeholder="0.00" min="0" step="0.01">
                                </div>
                                <div class="summary-row total">
                                    <span>TOTAL:</span>
                                    <span id="cartTotal">$0.00</span>
                                </div>
                            </div>
                        </div>

                        <!-- Cliente y Acciones -->
                        <div class="pos-actions">
                            <div class="customer-section">
                                <h4>üë§ Cliente</h4>
                                <select id="selectCliente">
                                    <option value="">Cliente Contado</option>
                                    <option value="cuenta">Cliente Cuenta Corriente</option>
                                </select>
                                <button id="nuevoCliente" class="btn btn-outline">+ Nuevo Cliente</button>
                            </div>

                            <div class="action-buttons">
                                <button id="finalizarVenta" class="btn btn-success">üí≥ Finalizar Venta</button>
                                <button id="crearPresupuesto" class="btn btn-primary">üìÑ Crear Presupuesto</button>
                                <button id="cancelarVenta" class="btn btn-danger">‚ùå Cancelar Venta</button>
                            </div>

                            <!-- M√©todos de Pago -->
                            <div id="paymentModal" class="modal" style="display: none;">
                                <div class="modal-content">
                                    <h3>üí≥ M√©todo de Pago</h3>
                                    <div class="payment-methods">
                                        <button class="payment-btn" data-method="efectivo">üíµ Efectivo</button>
                                        <button class="payment-btn" data-method="tarjeta">üí≥ Tarjeta</button>
                                        <button class="payment-btn" data-method="transferencia">üè¶ Transferencia</button>
                                        <button class="payment-btn" data-method="qr">üì± QR</button>
                                        <button class="payment-btn" data-method="cuenta">üìã Cuenta Corriente</button>
                                    </div>
                                    <div id="paymentDetails" class="payment-details">
                                        <!-- Detalles espec√≠ficos de cada m√©todo -->
                                    </div>
                                    <button id="confirmPayment" class="btn btn-success">Confirmar Pago</button>
                                    <button id="cancelPayment" class="btn btn-secondary">Cancelar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- P√°gina Productos -->
                <div id="pageProductos" class="page">
                    <div class="page-header">
                        <h2>üì¶ Gesti√≥n de Productos</h2>
                        <div class="page-actions">
                            <button id="nuevoProducto" class="btn btn-primary">+ Nuevo Producto</button>
                            <button id="importarExcel" class="btn btn-secondary">üì• Importar Excel</button>
                            <button id="exportarExcel" class="btn btn-secondary">üì§ Exportar Excel</button>
                        </div>
                    </div>
                    
                    <!-- Filtros -->
                    <div class="filters">
                        <input type="text" id="filterProductos" placeholder="üîç Filtrar productos...">
                        <select id="filterCategoria">
                            <option value="">Todas las categor√≠as</option>
                        </select>
                        <button id="filterStockBajo" class="btn btn-warning">‚ö†Ô∏è Stock Bajo</button>
                    </div>
                    
                    <!-- Lista de Productos -->
                    <div class="productos-grid" id="productosList">
                        <!-- Productos cargados din√°micamente -->
                    </div>
                </div>

                <!-- P√°gina Clientes -->
                <div id="pageClientes" class="page">
                    <div class="page-header">
                        <h2>üë• Gesti√≥n de Clientes</h2>
                        <button id="nuevoClientePage" class="btn btn-primary">+ Nuevo Cliente</button>
                    </div>
                    
                    <div class="clientes-list" id="clientesList">
                        <!-- Clientes cargados din√°micamente -->
                    </div>
                </div>

                <!-- P√°gina Caja -->
                <div id="pageCaja" class="page">
                    <div class="page-header">
                        <h2>üí∞ Cierre de Caja</h2>
                    </div>
                    
                    <div class="caja-resumen">
                        <div class="resumen-card">
                            <h3>Resumen del Turno</h3>
                            <div class="resumen-data">
                                <div class="data-row">
                                    <span>Saldo Inicial:</span>
                                    <span id="saldoInicialResumen">$0.00</span>
                                </div>
                                <div class="data-row">
                                    <span>Ventas Efectivo:</span>
                                    <span id="ventasEfectivo">$0.00</span>
                                </div>
                                <div class="data-row">
                                    <span>Ventas Tarjeta:</span>
                                    <span id="ventasTarjeta">$0.00</span>
                                </div>
                                <div class="data-row total">
                                    <span>Total Ventas:</span>
                                    <span id="totalVentas">$0.00</span>
                                </div>
                                <div class="data-row">
                                    <span>Saldo Final Estimado:</span>
                                    <span id="saldoFinal">$0.00</span>
                                </div>
                            </div>
                            <button id="cerrarCaja" class="btn btn-success">Cerrar Caja</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Gen√©rico -->
    <div id="genericModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">T√≠tulo</h3>
            <div id="modalBody">
                Contenido del modal
            </div>
            <div class="modal-actions">
                <button id="modalConfirm" class="btn btn-primary">Confirmar</button>
                <button id="modalCancel" class="btn btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>
