<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema POS - Ferreter√≠a</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ†Ô∏è</text></svg>">
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="screen">
        <div class="login-container">
            <div class="login-header">
                <h1><i class="fas fa-cash-register"></i> Sistema POS</h1>
                <p>Ferreter√≠a - Gesti√≥n de ventas y inventario</p>
                <div class="version">Versi√≥n 2.0.0</div>
            </div>
            
            <div class="login-card">
                <h2>Iniciar Sesi√≥n</h2>
                <div class="form-group">
                    <label for="loginEmail"><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" id="loginEmail" placeholder="usuario@ejemplo.com" value="angelmascali@gmail.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword"><i class="fas fa-lock"></i> Contrase√±a</label>
                    <input type="password" id="loginPassword" placeholder="Ingresa tu contrase√±a" value="cocacola">
                </div>
                
                <div id="loginStatus"></div>
                
                <button id="loginBtn" class="btn btn-primary btn-block">
                    <i class="fas fa-sign-in-alt"></i> Iniciar Sesi√≥n
                </button>
                
                <button id="loginOffline" class="btn btn-outline btn-block">
                    <i class="fas fa-wifi-slash"></i> Modo Offline
                </button>
                
                <div class="login-footer">
                    <p><i class="fas fa-info-circle"></i> Usa <strong>angelmascali@gmail.com</strong> con contrase√±a <strong>cocacola</strong></p>
                    <p>o usa cualquier email para modo offline</p>
                </div>
            </div>
            
            <div class="system-info">
                <h3><i class="fas fa-sync"></i> Sistema H√≠brido Online/Offline</h3>
                <div class="features">
                    <div class="feature">
                        <i class="fas fa-database"></i>
                        <span>Base de datos offline</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-sync-alt"></i>
                        <span>Sincronizaci√≥n autom√°tica</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-barcode"></i>
                        <span>Scanner de c√≥digo de barras</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-credit-card"></i>
                        <span>M√∫ltiples m√©todos de pago</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-chart-bar"></i>
                        <span>Reportes en tiempo real</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-truck"></i>
                        <span>Gesti√≥n de proveedores</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pantalla principal de la aplicaci√≥n -->
    <div id="appScreen" class="screen" style="display: none;">
        <!-- Configuraci√≥n inicial (local, caja, turno) -->
        <div id="initialConfig" class="config-screen">
            <div class="config-container">
                <div class="config-header">
                    <h1><i class="fas fa-store"></i> Configurar Sesi√≥n de Trabajo</h1>
                    <p>Selecciona tu local, caja y turno para comenzar</p>
                </div>
                
                <div class="config-card">
                    <div class="form-group">
                        <label for="selectLocal"><i class="fas fa-building"></i> Local</label>
                        <select id="selectLocal" class="form-control">
                            <option value="">Seleccionar local...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="selectCaja"><i class="fas fa-cash-register"></i> Caja</label>
                        <select id="selectCaja" class="form-control">
                            <option value="">Seleccionar caja...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="selectTurno"><i class="fas fa-clock"></i> Turno</label>
                        <select id="selectTurno" class="form-control">
                            <option value="">Seleccionar turno...</option>
                            <option value="ma√±ana">Ma√±ana (08:00 - 14:00)</option>
                            <option value="tarde">Tarde (14:00 - 20:00)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="saldoInicial"><i class="fas fa-money-bill-wave"></i> Saldo Inicial en Caja</label>
                        <input type="number" id="saldoInicial" class="form-control" placeholder="0.00" min="0" step="0.01" value="10000">
                    </div>
                    
                    <button id="startSession" class="btn btn-primary btn-block">
                        <i class="fas fa-play-circle"></i> Iniciar Sesi√≥n de Trabajo
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Aplicaci√≥n principal -->
        <div id="mainApp" class="app-container" style="display: none;">
            <!-- Barra superior -->
            <header class="app-header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="app-title">
                        <h1><i class="fas fa-cash-register"></i> <span id="currentPage">POS</span></h1>
                        <div class="session-info">
                            <span id="userInfo"><i class="fas fa-user"></i> Usuario: </span>
                            <span id="localInfo"><i class="fas fa-store"></i> Local: </span>
                            <span id="cajaInfo"><i class="fas fa-cash-register"></i> Caja: </span>
                            <span id="turnoInfo"><i class="fas fa-clock"></i> Turno: </span>
                        </div>
                    </div>
                </div>
                
                <div class="header-right">
                    <button id="syncStatus" class="btn-status online">
                        <i class="fas fa-wifi"></i> Online
                    </button>
                    <button id="logoutBtn" class="btn btn-outline">
                        <i class="fas fa-sign-out-alt"></i> Salir
                    </button>
                </div>
            </header>
            
            <div class="app-content">
                <!-- Barra lateral de navegaci√≥n -->
                <nav class="sidebar" id="sidebar">
                    <ul class="nav-menu">
                        <li>
                            <button class="nav-btn active" data-page="pos">
                                <i class="fas fa-shopping-cart"></i>
                                <span>POS / Venta</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-btn" data-page="productos">
                                <i class="fas fa-boxes"></i>
                                <span>Productos</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-btn" data-page="clientes">
                                <i class="fas fa-users"></i>
                                <span>Clientes</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-btn" data-page="proveedores">
                                <i class="fas fa-truck"></i>
                                <span>Proveedores</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-btn" data-page="presupuestos">
                                <i class="fas fa-file-invoice-dollar"></i>
                                <span>Presupuestos</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-btn" data-page="reportes">
                                <i class="fas fa-chart-bar"></i>
                                <span>Reportes</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-btn" data-page="caja">
                                <i class="fas fa-cash-register"></i>
                                <span>Caja</span>
                            </button>
                        </li>
                    </ul>
                    
                    <div class="sidebar-footer">
                        <div class="stats">
                            <div class="stat">
                                <i class="fas fa-shopping-bag"></i>
                                <span id="ventasHoyCount">0</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-file-alt"></i>
                                <span id="presupuestosCount">0</span>
                            </div>
                        </div>
                        <div class="app-version">
                            v2.0.0
                        </div>
                    </div>
                </nav>
                
                <!-- Contenido principal -->
                <main class="main-content">
                    <!-- P√°gina POS -->
                    <div id="pagePos" class="page active">
                        <div class="pos-container">
                            <!-- Panel de b√∫squeda y productos -->
                            <div class="pos-left">
                                <div class="search-section">
                                    <div class="search-header">
                                        <h2><i class="fas fa-search"></i> Buscar Producto</h2>
                                        <div class="search-actions">
                                            <button id="scanBarcode" class="btn btn-outline">
                                                <i class="fas fa-barcode"></i> Escanear
                                            </button>
                                            <button id="keyboardMode" class="btn btn-outline">
                                                <i class="fas fa-keyboard"></i> Teclado
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="search-input-group">
                                        <input type="text" id="productSearch" class="form-control" placeholder="C√≥digo de barras, c√≥digo interno o nombre del producto..." autocomplete="off">
                                        <button class="search-btn">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="cliente-section">
                                        <label for="selectCliente"><i class="fas fa-user-tag"></i> Cliente</label>
                                        <select id="selectCliente" class="form-control">
                                            <option value="">Cliente Contado</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="products-section">
                                    <h3><i class="fas fa-box-open"></i> Productos Disponibles</h3>
                                    <div class="products-grid" id="productosGrid">
                                        <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
                                        <div class="loading-products">
                                            <i class="fas fa-spinner fa-spin"></i> Cargando productos...
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Panel del carrito -->
                            <div class="pos-right">
                                <div class="cart-header">
                                    <h2><i class="fas fa-shopping-cart"></i> Carrito de Venta</h2>
                                    <div class="cart-actions">
                                        <button id="cancelarVenta" class="btn btn-danger">
                                            <i class="fas fa-times"></i> Cancelar
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="cart-items" id="cartItems">
                                    <div class="cart-empty">
                                        <i class="fas fa-shopping-cart fa-2x"></i>
                                        <p>Busca y agrega productos al carrito</p>
                                    </div>
                                </div>
                                
                                <div class="cart-summary">
                                    <div class="summary-row">
                                        <span>Subtotal:</span>
                                        <span id="cartSubtotal">$0.00</span>
                                    </div>
                                    <div class="summary-row">
                                        <label for="cartDiscount">Descuento:</label>
                                        <div class="discount-input">
                                            <span>$</span>
                                            <input type="number" id="cartDiscount" value="0" min="0" step="0.01">
                                        </div>
                                    </div>
                                    <div class="summary-row total">
                                        <span>TOTAL:</span>
                                        <span id="cartTotal">$0.00</span>
                                    </div>
                                    
                                    <div class="cart-buttons">
                                        <button id="crearPresupuesto" class="btn btn-secondary">
                                            <i class="fas fa-file-alt"></i> Presupuesto
                                        </button>
                                        <button id="finalizarVenta" class="btn btn-success">
                                            <i class="fas fa-check-circle"></i> Finalizar Venta
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- P√°gina Productos -->
                    <div id="pageProductos" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-boxes"></i> Gesti√≥n de Productos</h2>
                            <div class="page-actions">
                                <button id="nuevoProducto" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Nuevo Producto
                                </button>
                                <button id="importarExcel" class="btn btn-outline">
                                    <i class="fas fa-file-import"></i> Importar Excel
                                </button>
                                <button id="exportarExcel" class="btn btn-outline">
                                    <i class="fas fa-file-export"></i> Exportar Excel
                                </button>
                            </div>
                        </div>
                        
                        <div class="filters-section">
                            <div class="search-filter">
                                <i class="fas fa-search"></i>
                                <input type="text" id="filterProductos" placeholder="Buscar productos...">
                            </div>
                            <div class="filter-buttons">
                                <button id="filterStockBajo" class="btn btn-warning">
                                    <i class="fas fa-exclamation-triangle"></i> Stock Bajo
                                </button>
                                <button class="btn btn-outline">
                                    <i class="fas fa-filter"></i> Filtrar
                                </button>
                            </div>
                        </div>
                        
                        <div class="products-list" id="productosList">
                            <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
                            <div class="loading">
                                <i class="fas fa-spinner fa-spin"></i> Cargando productos...
                            </div>
                        </div>
                    </div>
                    
                    <!-- P√°gina Clientes -->
                    <div id="pageClientes" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-users"></i> Gesti√≥n de Clientes</h2>
                            <div class="page-actions">
                                <button id="nuevoCliente" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Nuevo Cliente
                                </button>
                                <button id="nuevoClientePage" class="btn btn-outline">
                                    <i class="fas fa-user-plus"></i> Agregar Cliente
                                </button>
                            </div>
                        </div>
                        
                        <div class="clients-list" id="clientesList">
                            <!-- Los clientes se cargar√°n aqu√≠ din√°micamente -->
                            <div class="loading">
                                <i class="fas fa-spinner fa-spin"></i> Cargando clientes...
                            </div>
                        </div>
                    </div>
                    
                    <!-- P√°gina Proveedores -->
                    <div id="pageProveedores" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-truck"></i> Gesti√≥n de Proveedores</h2>
                            <div class="page-actions">
                                <button id="nuevoProveedor" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Nuevo Proveedor
                                </button>
                            </div>
                        </div>
                        
                        <div class="proveedores-list" id="proveedoresList">
                            <!-- Los proveedores se cargar√°n aqu√≠ din√°micamente -->
                            <div class="loading">
                                <i class="fas fa-spinner fa-spin"></i> Cargando proveedores...
                            </div>
                        </div>
                    </div>
                    
                    <!-- P√°gina Presupuestos -->
                    <div id="pagePresupuestos" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-file-invoice-dollar"></i> Presupuestos</h2>
                            <div class="page-actions">
                                <button class="btn btn-outline">
                                    <i class="fas fa-sync"></i> Actualizar
                                </button>
                            </div>
                        </div>
                        
                        <div class="presupuestos-list" id="presupuestosList">
                            <!-- Los presupuestos se cargar√°n aqu√≠ din√°micamente -->
                            <div class="loading">
                                <i class="fas fa-spinner fa-spin"></i> Cargando presupuestos...
                            </div>
                        </div>
                    </div>
                    
                    <!-- P√°gina Reportes -->
                    <div id="pageReportes" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-chart-bar"></i> Reportes y Estad√≠sticas</h2>
                        </div>
                        
                        <div class="reportes-content" id="reportesContent">
                            <!-- Los reportes se cargar√°n aqu√≠ din√°micamente -->
                            <div class="loading">
                                <i class="fas fa-spinner fa-spin"></i> Cargando reportes...
                            </div>
                        </div>
                    </div>
                    
                    <!-- P√°gina Caja -->
                    <div id="pageCaja" class="page">
                        <div class="page-header">
                            <h2><i class="fas fa-cash-register"></i> Caja</h2>
                            <div class="page-actions">
                                <button id="cerrarCaja" class="btn btn-danger">
                                    <i class="fas fa-lock"></i> Cerrar Caja
                                </button>
                            </div>
                        </div>
                        
                        <div class="caja-resumen">
                            <div class="resumen-card">
                                <h3><i class="fas fa-cash-register"></i> Resumen de Caja</h3>
                                <div class="resumen-data">
                                    <div class="data-row">
                                        <span>Saldo Inicial:</span>
                                        <span id="saldoInicialResumen">$0.00</span>
                                    </div>
                                    <div class="data-row">
                                        <span>Ventas en Efectivo:</span>
                                        <span id="ventasEfectivo">$0.00</span>
                                    </div>
                                    <div class="data-row">
                                        <span>Ventas con Tarjeta:</span>
                                        <span id="ventasTarjeta">$0.00</span>
                                    </div>
                                    <div class="data-row">
                                        <span>Total Ventas:</span>
                                        <span id="totalVentas">$0.00</span>
                                    </div>
                                    <div class="data-row total">
                                        <span>Saldo Final Estimado:</span>
                                        <span id="saldoFinal">$0.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="caja-detalle">
                                <h3><i class="fas fa-list-alt"></i> Detalle de Movimientos</h3>
                                <div class="movimientos-list">
                                    <div class="no-data">
                                        <i class="fas fa-info-circle"></i>
                                        <p>No hay movimientos para mostrar</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>
    
    <!-- Modal de Pago -->
    <div id="paymentModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-credit-card"></i> M√©todo de Pago</h2>
                <button class="close-btn" onclick="document.getElementById('paymentModal').style.display = 'none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="payment-methods">
                    <h3>Selecciona m√©todo de pago:</h3>
                    <div class="methods-grid">
                        <button class="payment-btn active" data-method="efectivo">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>Efectivo</span>
                        </button>
                        <button class="payment-btn" data-method="tarjeta">
                            <i class="fas fa-credit-card"></i>
                            <span>Tarjeta</span>
                        </button>
                        <button class="payment-btn" data-method="transferencia">
                            <i class="fas fa-university"></i>
                            <span>Transferencia</span>
                        </button>
                        <button class="payment-btn" data-method="qr">
                            <i class="fas fa-qrcode"></i>
                            <span>QR/Pago Digital</span>
                        </button>
                        <button class="payment-btn" data-method="cuenta">
                            <i class="fas fa-file-invoice-dollar"></i>
                            <span>Cuenta Corriente</span>
                        </button>
                    </div>
                </div>
                
                <div class="payment-details" id="paymentDetails">
                    <!-- Los detalles de pago se cargar√°n aqu√≠ din√°micamente -->
                </div>
                
                <div class="payment-total">
                    <h3>Total a Pagar: <span id="paymentTotalAmount">$0.00</span></h3>
                </div>
            </div>
            
            <div class="modal-footer">
                <button id="confirmPayment" class="btn btn-success btn-lg">
                    <i class="fas fa-check-circle"></i> Confirmar Pago
                </button>
                <button id="cancelPayment" class="btn btn-outline btn-lg">
                    <i class="fas fa-times"></i> Cancelar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal Gen√©rico -->
    <div id="genericModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">T√≠tulo del Modal</h2>
                <button class="close-btn" onclick="document.getElementById('genericModal').style.display = 'none'">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body" id="modalBody">
                <!-- Contenido del modal se cargar√° aqu√≠ -->
            </div>
            
            <div class="modal-footer">
                <button id="modalConfirm" class="btn btn-primary">
                    <i class="fas fa-check"></i> Confirmar
                </button>
                <button id="modalCancel" class="btn btn-outline">
                    <i class="fas fa-times"></i> Cancelar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Scanner de C√≥digo de Barras -->
    <div id="scannerContainer" class="scanner-container" style="display: none;">
        <div class="scanner-content">
            <div class="scanner-header">
                <h2><i class="fas fa-barcode"></i> Escanear C√≥digo de Barras</h2>
                <button id="stopScanner" class="btn btn-danger">
                    <i class="fas fa-times"></i> Cerrar
                </button>
            </div>
            
            <div class="scanner-video">
                <video id="scannerVideo" width="100%" height="auto" autoplay playsinline></video>
                <div class="scanner-overlay">
                    <div class="scanner-frame"></div>
                    <p>Apunta el c√≥digo de barras dentro del marco</p>
                </div>
            </div>
            
            <div class="scanner-info">
                <p><i class="fas fa-info-circle"></i> Simulando detecci√≥n de c√≥digo de barras...</p>
                <p>En un entorno real, aqu√≠ se procesar√≠a el video de la c√°mara</p>
            </div>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
